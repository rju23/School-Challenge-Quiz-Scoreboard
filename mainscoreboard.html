<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Quiz Scoreboard</title>


  <style>

#visualManager {
  position: fixed;
  top: 0;
  right: -260px;              /* hidden by default */
  width: 260px;
  height: 100vh;
  background: #111;
  border-left: 2px solid #444;
  padding: 10px;
  box-sizing: border-box;
  z-index: 10000;
  transition: right 0.3s ease;
}

/* Visible state */
#visualManager.open {
  right: 0;
}

/* Toggle button */
#toggleVisualPanel {
  position: absolute;
  left: -30px;
  top: 50%;
  transform: translateY(-50%);
  width: 30px;
  height: 60px;
  background: #111;
  color: white;
  border: 1px solid #444;
  cursor: pointer;
}

/* Scrollable visual list */
#visualList {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 10px;

  overflow-y: auto;                      /* âœ… enable scroll */
  max-height: calc(100vh - 120px);       /* âœ… leave room for buttons */
}

/* Auto-resizing thumbnails */
#visualList img {
  width: 100%;
  max-height: 60px;                      /* ðŸ”§ controls size */
  height: auto;
  object-fit: contain;

  border: 2px solid #555;
  cursor: grab;
  user-select: none;
}


    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: black;
      color: white;
      font-family: Arial, sans-serif;
      overflow: hidden;
    }

    body {
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      align-items: center;
    }

    h1 {
      font-size: 3rem;
      margin-top: 20px;
    }

    .teams-container {
      display: flex;
      justify-content: space-around;
      align-items: center;
      width: 100%;
      flex: 1;
    }

    .team {
      display: flex;
      flex-direction: column;
      align-items: center;
      flex: 1;
    }

    .team h2 {
      font-size: 3rem;
      margin: 0;
    }

    .score {
      font-size: 6rem;
      font-weight: bold;
      margin-top: 10px;
    }

    .bottom-container {
      width: 100%;
      display: flex;
      justify-content: center;
      flex-direction: column;
      align-items: center;
      margin-bottom: 20px;
    }

    #round {
      font-size: 3rem;
      margin-bottom: 10px;
    }

    #timer {
      font-size: 4.5rem;
    }

    button#fullscreenBtn {
      position: absolute;
      top: 10px;
      left: 10px;
      padding: 10px 15px;
      font-size: 1rem;
      cursor: pointer;
    }
    

    @media screen and (max-width: 1200px) {
      .team h2 { font-size: 2rem; }
      .score { font-size: 4rem; }
      #round { font-size: 2rem; }
      #timer { font-size: 3rem; }
    }
  </style>
</head>
<body>
  <h1>Quiz Scoreboard</h1>

  <button id="fullscreenBtn" onclick="toggleFullscreen()">Fullscreen</button>
  

  <div class="teams-container">
    <!-- Team A -->
    <div class="team">
      <h2 id="teamAName">Team A</h2>
      <div id="scoreA" class="score">0</div>
    </div>

    <!-- Team B -->
    <div class="team">
      <h2 id="teamBName">Team B</h2>
      <div id="scoreB" class="score">0</div>
    </div>
  </div>

  <div class="bottom-container">
    <div id="round">ALTERNATE</div>
    <div id="timer">04:00</div>
  </div>

  <script>

    function toggleFullscreen() {
      if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen();
      } else {
        if (document.exitFullscreen) {
          document.exitFullscreen();
        }
      }
    }
  </script>
</div>

<!-- Visual Manager (Main Scoreboard Only) -->
<div id="visualManager">
  <button id="toggleVisualPanel">â—€</button>

  <input type="file" id="visualUpload" accept="image/*" multiple>
  <div id="visualList"></div>
</div>

  <script>
let currentVisualIndex = 0;
let visuals = [];

const upload = document.getElementById("visualUpload");
const list = document.getElementById("visualList");

/* ==========================
   UPLOAD VISUALS
========================== */
upload.addEventListener("change", (e) => {
  visuals = [];
  list.innerHTML = "";
  currentVisualIndex = 0;

  Array.from(e.target.files).forEach(file => {
    const reader = new FileReader();
    reader.onload = ev => {
      visuals.push(ev.target.result);
      render();
    };
    reader.readAsDataURL(file);
  });
});

/* ==========================
   RENDER LIST WITH â†‘ â†“ BUTTONS
========================== */
function render() {
  list.innerHTML = "";

  visuals.forEach((src, i) => {
    const row = document.createElement("div");
    row.style.display = "flex";
    row.style.alignItems = "center";
    row.style.gap = "6px";

    const img = document.createElement("img");
    img.src = src;

    const controls = document.createElement("div");
    controls.style.display = "flex";
    controls.style.flexDirection = "column";
    controls.style.gap = "2px";

    const upBtn = document.createElement("button");
    upBtn.textContent = "â–²";
    upBtn.disabled = i === 0;
    upBtn.onclick = () => moveVisual(i, -1);

    const downBtn = document.createElement("button");
    downBtn.textContent = "â–¼";
    downBtn.disabled = i === visuals.length - 1;
    downBtn.onclick = () => moveVisual(i, 1);

    controls.appendChild(upBtn);
    controls.appendChild(downBtn);

    row.appendChild(img);
    row.appendChild(controls);
    list.appendChild(row);
  });
}

/* ==========================
   MOVE VISUALS
========================== */
function moveVisual(index, direction) {
  const newIndex = index + direction;
  if (newIndex < 0 || newIndex >= visuals.length) return;

  const temp = visuals[index];
  visuals[index] = visuals[newIndex];
  visuals[newIndex] = temp;

  // Keep currentVisualIndex valid
  if (currentVisualIndex > visuals.length) {
    currentVisualIndex = visuals.length;
  }

  render();
}

/* ==========================
   LISTEN FOR CONTROL PANEL
========================== */
let lastVisualTime = 0;

setInterval(() => {
  const msg = localStorage.getItem("visualCommand");
  if (!msg) return;

  try {
    const data = JSON.parse(msg);
    if (data.time <= lastVisualTime) return;

    lastVisualTime = data.time;
    if (!visuals.length) return;

    if (currentVisualIndex >= visuals.length) {
      currentVisualIndex = 0; // loop safely
    }

    showVisual(visuals[currentVisualIndex]);
    currentVisualIndex++;
  } catch {}
}, 200);

/* ==========================
   SHOW VISUAL OVERLAY
========================== */
function showVisual(src) {
  const overlay = document.getElementById("visualOverlay");
  const img = document.getElementById("visualImage");

  img.src = src;
  overlay.style.display = "flex";

  setTimeout(() => {
    overlay.style.display = "none";
  }, 3000);
}

/* ==========================
   TOGGLE VISUAL PANEL
========================== */
const panel = document.getElementById("visualManager");
const toggleBtn = document.getElementById("toggleVisualPanel");

toggleBtn.addEventListener("click", () => {
  panel.classList.toggle("open");
  toggleBtn.textContent = panel.classList.contains("open") ? "â–¶" : "â—€";
});


</script>
<div id="visualOverlay" style="
  position: fixed;
  inset: 0;
  background: black;
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 9999;
">
  <img id="visualImage" style="
    width: 100%;
    height: 100%;
    object-fit: contain;
  ">
</div>
<script src="script.js"></script>
</body>
</html>
